<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Mapping file autogenerated by MyEclipse Persistence Tools -->
<hibernate-mapping>
	<class name="framgiavn.project01.web.model.User" table="users"
		dynamic-insert="true" dynamic-update="true">
		<id name="id" type="java.lang.Integer">
            <column name="id" length="20" />
            <generator class="identity" />
        </id>
        <property name="name" type="java.lang.String">
            <column name="name" length="128" />
        </property>
        <property name="email" type="java.lang.String">
            <column name="email" length="50" />
        </property>
        <property name="suppervisor" type="java.lang.Integer">
            <column name="suppervisor" length="128" />
        </property>
        <property name="password" type="java.lang.String">
            <column name="password" length="50" />
        </property>              
        <property name="createAt" type="java.util.Date">
            <column name="create_at" length="50" />
        </property>
        <property name="updateAt" type="java.util.Date">
            <column name="update_at" length="50" />
        </property> 
        <bag name="takeCourses" table="take_courses"
                inverse="true" lazy="false" fetch="select">
            <key column="user_id" not-null="true" />
            <one-to-many class="framgiavn.project01.web.model.TakeCourse" />
        </bag> 
    </class>

	<query name="User.SelectMemberNotInCourse">
    	select user  
    	from User user
    	where ( user.suppervisor=0 and not exists ( from user.takeCourses where course_id=:id )) 
    </query>

    <query name="User.SelectUserById">
    	select user  
    	from User user
    	where user.id = :id
    </query>
    
    <query name="User.SelectAll">
    	select user  
    	from User user
    </query>
    
    <query name="User.DeleteById">
    	delete from User user where user.id = :id
    </query>
	<query name="User.SelectByEmail">
		select user
		from User user
		where user.email = :email
	</query>
</hibernate-mapping>